<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>SnapRevise</title>
  <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-gray-50 min-h-screen flex items-center justify-center px-4">
  <div class="max-w-xl w-full">
    <h1 class="text-3xl font-bold text-center mb-2">SnapRevise</h1>
    <p class="text-center text-gray-600 mb-6">
       Fast and clear revision using summaries and flashcards!
    </p>

    <form action="/" method="POST" enctype="multipart/form-data"
          class="bg-white rounded-2xl shadow-md p-8 border border-dashed border-gray-300 text-center"
          onsubmit="showSpinner()">

      <!-- Preview Image Section -->
      <div id="preview-container" class="hidden mb-4 relative">
        <img id="preview-image" class="mx-auto rounded-lg max-h-64 object-contain" />
        <button type="button" id="remove-image" class="absolute top-2 right-2 bg-white p-1 rounded-full shadow">
          ✕
        </button>
        <p id="ready-label" class="text-green-600 font-medium mt-2">✔ Ready</p>
      </div>

      <!-- File Input -->
      <label for="image"
             class="flex flex-col items-center justify-center cursor-pointer py-10 border-2 border-dashed border-gray-300 rounded-xl hover:bg-gray-50 transition">
        <svg xmlns="http://www.w3.org/2000/svg" class="h-10 w-10 text-gray-400 mb-3" fill="none"
             viewBox="0 0 24 24" stroke="currentColor">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                d="M3 15a4 4 0 004 4h10a4 4 0 004-4M7 10l5-5m0 0l5 5m-5-5v12"/>
        </svg>
        <p class="text-gray-600 font-semibold">Drop your image here</p>
        <p class="text-gray-400 text-sm">or click to browse your files</p>
        <p class="text-sm text-gray-400 mt-1">Supports PNG, JPG, JPEG files</p>
        <input id="image" name="image" type="file" class="hidden" accept="image/png, image/jpeg">
      </label>

      <button id="submit-btn" type="submit"
              class="mt-6 w-full bg-blue-600 hover:bg-blue-700 text-white font-semibold py-2 rounded-lg transition flex items-center justify-center gap-2">
        <span id="submit-text">Generate Summary and Flashcards</span>
        <svg id="loading-spinner" class="animate-spin h-5 w-5 text-white hidden" xmlns="http://www.w3.org/2000/svg" fill="none"
             viewBox="0 0 24 24">
          <circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle>
          <path class="opacity-75" fill="currentColor"
                d="M4 12a8 8 0 018-8v4l3-3-3-3v4a8 8 0 00-8 8h4z"></path>
        </svg>
      </button>
    </form>

    <p class="mt-4 text-center text-xs text-gray-400">
      Your image will be processed securely and used only for flashcard generation
    </p>
  </div>

  <script>
    const input = document.getElementById('image');
    const previewContainer = document.getElementById('preview-container');
    const previewImage = document.getElementById('preview-image');
    const removeBtn = document.getElementById('remove-image');

    input.addEventListener('change', () => {
      const file = input.files[0];
      if (file) {
        const reader = new FileReader();
        reader.onload = () => {
          previewImage.src = reader.result;
          previewContainer.classList.remove('hidden');
        };
        reader.readAsDataURL(file);
      }
    });

    removeBtn.addEventListener('click', () => {
      previewImage.src = '';
      previewContainer.classList.add('hidden');
      input.value = '';
    });

    function showSpinner() {
      const btn = document.getElementById('submit-btn');
      const text = document.getElementById('submit-text');
      const spinner = document.getElementById('loading-spinner');

      btn.disabled = true;
      btn.classList.remove('bg-blue-600', 'hover:bg-blue-700');
      btn.classList.add('bg-blue-300');
      text.textContent = 'Processing...';
      spinner.classList.remove('hidden');
    }
  </script>
</body>
</html>
